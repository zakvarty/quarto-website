{
  "hash": "c32399c8e80dadd517e34528436a9fdb",
  "result": {
    "markdown": "---\ntitle: \"Data Journalism: Recreating a Professional Plot\"\ndescription: |\n    Recreating a plot of record breaking temperatures by the BBC data journalism team.\ndate: \"2022-10-15\"\ncategories:\n  - data visualisation\ncode-fold: true\nimage: \"zdv-temperature-records.png\"\nimage-alt: |\n    BBC dumbbell plot showing stations with the largest gaps between previous and new records, ordered by the highest new temperature.\ndraft: false\nfreeze: true\nappendix-style: none #(default, plain, none)\nbibliography: ../library.bib\ncitation: false\n---\n\n\n# BBC Temperature Records\n\nOn Friday 2022-10-14, the BBC Data Journalism Team released this excellent [article](https://www.bbc.co.uk/news/science-environment-63244353) about the record temperatures in the UK during this summer's heatwave. The article has some amazing data visualisations, and draws on a recent Met Office report.\n\nI wanted to try and recreate one of the plots to test the limits of my ggplot knowledge. Since I had already tackled a stacked bar plot, I figured I might have a go at their dumbbell plot that shows the weather stations which exceeded their previous records largest margins.\n\n![bbc temperature records dumbbell plot](bbc-temperature-records.png.webp)\n\n\nI couldn't find the data source, so spent __far__ too long with a printed copy of the original figure to make my own version of the data set. \n\nIt took a while, but I got most of the way there with it and am happy with the final result. \n\n![my attempt at recreating the same plot](zdv-temperature-records.png)\n\nThere were a few things that still have me stumped, that I might revisit at some later date: \n\n- [x] Left aligning title and caption (Thanks to Jack Davison for this!)\n- [ ] Using gradients on multiple parts of the plot\n- [ ] Using the YeOrRd gradient, rather than default blues \n- [ ] Adding a non-BBC logo to the bottom right.\n\nIf anyone with superior ggplot skills would like to help with those or give pointers, then I would be most grateful! \n\nCode and figure down below â†“ \n\n\n::: {.cell fig.dpi='100'}\n\n```{.r .cell-code}\n# Load packages ----\nlibrary(bbplot)\nlibrary(tidyverse)\nlibrary(showtext)\n\n# Import fonts ----\nfont_add_google(name = \"Roboto Slab\", family = \"roboto-slab\")\nfont_add_google(name = \"Roboto\", family = \"roboto\")\nshowtext_auto()\ntitle_font <- \"roboto-slab\"\nfont <- \"roboto\"\n\n# Input data (estimated values from article) ---\ntemperatures <- tibble::tribble(\n  ~location, ~max_prev, ~max_2022,\n  \"Cranwell\", 36.6, 39.9,\n  \"Nottingham\", 36.0, 39.8,\n  \"Bramham\", 33.5, 39.8,\n  \"Sutton Boningon\", 35.9, 39.4,\n  \"Sheffield\", 35.6, 39.4,\n  \"Leeming\", 34.4, 38.7,\n  \"Goudhurst\", 34.7, 37.9,\n  \"Whitby\", 33.1, 37.8,\n  \"Bradford\", 33.9, 37.8,\n  \"High Mowthorpe\", 33.1, 37.2,\n  \"Blackpool\", 33.6, 37.2,\n  \"Durham\", 32.9, 36.9,\n  \"Preston\", 33.1, 36.5,\n  \"Morecambe\", 32.7, 36.4,\n  \"Stonyhurst\", 32.6, 36.3,\n  \"Keele\", 32.9, 36.2,\n  \"Bude\", 32.2, 36.1,\n  \"Buxton\", 32.7, 36.0,\n  \"Kielder Castle\", 29.6, 35.0,\n  \"Bala\", 31.9, 34.9\n)\n\n# Data preparation ----\n\n## For the points ----\ntemperatures <- temperatures |>\n  dplyr::mutate(max_ever = pmax(max_2022, max_prev))\n\ntemperatures$location <- forcats::fct_reorder(as.factor(temperatures$location), .x = temperatures$max_ever)\n\ntemp_long <- tidyr::pivot_longer(temperatures, cols = c(max_2022, max_prev), names_to = \"year\",values_to = \"temperature\")\n\n## For the bars ----\nn_interp <- 501\ntemp_interpolated <- tibble(rep(NA, n_interp*20))\ntemp_interpolated[[1]] <- rep(temperatures$location, each = n_interp)\ntemp_interpolated[[2]] <- rep(NA_real_, n_interp*20)\nnames(temp_interpolated) <- c(\"location\", \"interp_value\")\nfor (i in 1:20) {\n  temp_interpolated$interp_value[(1 + n_interp * (i - 1)):(n_interp*i)] <-\n    seq(temperatures$max_prev[i], temperatures$max_2022[i], length.out = n_interp)\n}\n\nstr_wrap_break <- function(x, break_limit) {\n  # Function from {usefunc} by N Rennie (https://github.com/nrennie/usefunc)\n  sapply(strwrap(x, break_limit, simplify = FALSE), paste, collapse = \"\\n\")\n}\n\ntitle_string <- \"Huge breaks from previous records in 2022\"\nsubtitle_string <- str_wrap_break(\"Stations with largest gaps between previous and new records, ordered by highest new temperature\",60)\ncaption_string <- \"Only includes active weather stations with at least 50 years of observations\"\n\n\n\n\n\np <- ggplot() +\n  geom_line(data = temp_interpolated, aes(x = interp_value, y = location, color = interp_value), lwd = 3) +\n  #\n  geom_label(aes(label = \"2022 record\", x = 38.7, y = 7.2), family = font, size = 6.5, label.size = NA) +\n  geom_curve(aes(x = 38, y = 7.9, xend = 36.9, yend = 8.9)) +\n  #\n  geom_text(aes(label = \"Previous \\n record\", x = 31, y = 11), family = font, size = 6.5) +\n  geom_curve(aes(xend = 32, yend = 11, x = 32.9, y = 8.9)) +\n  #\n  geom_label(aes(label = \"Biggest leap\", x = 33.7, y = 20), family = font, size = 6.5, label.size = NA) +\n  geom_label(aes(label = \"6.3C\", x = 34.0, y = 19), family = font, fontface=\"bold\", size = 6.5, label.size = NA) +\n  geom_curve(aes(xend = 34.7, yend = 19.5, x = 35.7, y = 18)) +\n  #\n  geom_point(data = temp_long, aes(x = temperature, y = location, fill = temperature), shape = 21, color = \"black\", size = 6) +\n  #\n  scale_x_continuous(breaks = seq(30, 40, by = 2.5),labels = paste0(seq(30, 40, by = 2.5),\"C\")) +\n  #\n  labs(title = title_string,\n       subtitle = subtitle_string,\n       caption = caption_string) +\n  #\n  theme(plot.title = element_text(family=title_font,\n                                  size=28,\n                                  face=\"bold\",\n                                  color=\"#222222\"),\n        plot.subtitle = element_text(family=font,\n                                     size=18,\n                                     margin=ggplot2::margin(9,0,9,0)),\n        plot.caption = element_text(family = font, size = 14,hjust = 0),\n        plot.title.position = 'plot',\n        plot.caption.position = 'plot',\n        axis.title = ggplot2::element_blank(),\n        axis.text = ggplot2::element_text(family=font,\n                                          size=18,\n                                          color=\"grey47\"),\n        legend.position = \"none\",\n        title = element_text(),\n        axis.line.x = element_line(size = 0.7, linetype = \"solid\"),\n        axis.ticks.y = element_blank(),\n        axis.ticks.length.x = unit(7, units = \"points\" ),\n        axis.text.x = element_text(margin=margin(t = 15, b = 10)),\n        panel.grid.minor = ggplot2::element_blank(),\n        panel.grid.major.y = ggplot2::element_line(color=\"#cbcbcb\"),\n        panel.grid.major.x = ggplot2::element_blank(),\n        panel.background = ggplot2::element_blank(),\n  )\n\np\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){fig-alt='My dumbbell plot showing stations with the largest gaps between previous and new records, ordered by the highest new temperature.' width=960}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}