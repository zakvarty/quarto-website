{
  "hash": "088299b6b568b945cecbf08ef8a5c063",
  "result": {
    "markdown": "---\ntitle: \"Tidy Tuesday: Ravelry Yarn\"\ndescription: |\n    Tidy Tuesday 2022 || Week 41\ndate: \"2022-10-12\"\ncategories:\n  - data visualisation\n  - tidy tuesday\ncode-fold: true\nimage: \"2022-10-11-tidy-tuesday-ravelry.png\"\nimage-alt: |\n    Stacked bar chart of yarn weights on Ravelry. Bars are descending order by their fequency, with yarn-type labels written within the bars and count values to the right of the bars. Annotations indicate that the most popular yarn weights are Fingering and Double Knit, and that there were more missing yarn weights than in all remaining categories combined.\ndraft: false\nfreeze: true\nappendix-style: none #(default, plain, none)\nbibliography: ../library.bib\ncitation: false\n---\n\n\nFor my first Tidy Tuesday I kept things simple with a stacked bar chart.\n\nI have made several plots using `{ggplot2}` before, but this was my first attempt at making one aesthetically pleasing (forgive the pun).\n\nWhen making this plot I learned about using custom font, colours, annotations and arrows from a lot of [\\@nrennie](https://twitter.com/nrennie \"Nicola Rennie - Twitter\")'s past examples.\n\nCode and figure down below â†“\n\n\n::: {.cell fig.dpi='100'}\n\n```{.r .cell-code}\n# Load Packages ----\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(forcats)\nlibrary(showtext)\n\n# Load Fonts ----\nfont_add_google(name = \"Indie Flower\", family = \"indie-flower\")\nfont_add_google(name = \"Permanent Marker\", family = \"marker\")\nshowtext_auto()\n\n# Load Data ----\nurl <- \"https://github.com/rfordatascience/tidytuesday/raw/master/data/2022/2022-10-11/yarn.csv\"\nyarn <- readr::read_csv(file = url)\n\n# Data Handling ----\n\nother_weight_names <- c(\n  \"Thread\",\n  \"Cobweb\",\n  \"Jumbo\",\n  \"DK / Sport\",\n  \"Aran / Worsted\",\n  \"No weight specified\")\n\nyarn_data <- yarn %>%\n  select(yarn_weight_name) %>%\n  mutate(yarn_weight_name = as.character(yarn_weight_name)) %>%\n  mutate_at(c(\"yarn_weight_name\"), ~replace_na(.,\"Missing\")) %>%\n  mutate(name = fct_collapse(yarn_weight_name, Other = other_weight_names)) %>%\n  mutate(name = fct_collapse(name, \"Double Knit\" = c(\"DK\"))) %>%\n  group_by(name) %>%\n  summarise(value = n())\n\n# Helper data frames for adding arrows to plot\narrow_df_1 <- data.frame(x1 = 27000, x2 = 27000, y1 = 7.5, y2 = 10.4)\narrow_df_2 <- data.frame(x1 = 27000, x2 = 19000, y1 = 7.5, y2 = 10)\n\n# Making Plot ----\n\nbar_colour <- \"#483248\"\nbg_colour <- \"#FEFBEA\"\ntitle_font <- \"marker\"\nmain_font <- \"indie-flower\"\n\nyarn_plot <- yarn_data %>%\n  ggplot(aes(y = reorder(name, value), x = value)) +\n  geom_bar(stat = \"identity\", fill = bar_colour) +\n  theme_void() +\n  ggtitle(\" \\n Yarn weights on Ravelry, ordered by frequency\",subtitle = \" \") +\n  theme(axis.title = element_blank(),\n        axis.text = element_blank(),\n        axis.ticks = element_blank(),\n        text = element_text(family = main_font),\n        plot.background = element_rect(fill = bg_colour, colour = bg_colour),\n        panel.background = element_rect(fill = bg_colour, colour = bg_colour),\n        plot.title = element_text(family = title_font, size = 22, hjust = 0.5)\n  ) +\n  lims(x = c(0,28000)) +\n  geom_text(aes(label = name, x = 200),\n            color = bg_colour,\n            hjust = 0,\n            family = main_font,\n            size = 5) +\n  geom_text(aes(label = value),\n            hjust = 0,\n            nudge_x = 200,\n            color = bar_colour,\n            family = main_font,\n            size = 6) +\n  geom_text(aes(label = \"The most popular yarn weights \\n  are 'Fingering' and 'Double Knit'\",\n                x = 20000,\n                y = 6.7),\n            family = main_font,\n            size = 7) +\n  geom_text(aes(label = \"There were more missing yarn weights \\n than in all remaining categories combined\",\n                x = 18000,\n                y = 1.6),\n            family = main_font,\n            size  = 7) +\n  geom_text(aes(label = \"}\"),\n            x = 7000,\n            y = 1.5,\n            size = 19,\n            family = main_font) +\n  geom_text(aes(label = \"Tidy Tuesday 11 Oct 2022 | Data: Ravelry |  @zakvarty\"),\n            x = 29000,\n            y = 4.5,\n            size = 5,\n            family = main_font,\n            angle = 270) +\n  geom_curve(aes(x = x1, y = y1, xend = x2, yend = y2),\n             data = arrow_df_1,\n             arrow = arrow(length = unit(0.03, \"npc\"))) +\n  geom_curve(aes(x = x1, y = y1, xend = x2, yend = y2),\n             data = arrow_df_2,\n             arrow = arrow(length = unit(0.03, \"npc\")))\n\nyarn_plot\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){fig-alt='Stacked bar chart of yarn weights on Ravelry. Bars are descending order by their frequency, with yarn-type labels written within the bars and count values to the right of the bars. Annotations indicate that the most popular yarn weights are \\'Fingering\\' and \\'Double Knit\\', and that there were more missing yarn weights than in all remaining categories combined.' width=768}\n:::\n\n```{.r .cell-code}\n# Exported as 8x8 inch pdf and 800x700 png\n# (next time start by setting canvas size!)\n```\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}